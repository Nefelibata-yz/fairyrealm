(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9482:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),t(151),t(7718),t(7824);var s=t(3282),a=t(5736),n=t(3906),i=t.n(n),o=t(6880),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(r,l);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,151)),"/Users/m4/Downloads/Y/Github/fairyrealm/apps/web/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,7718)),"/Users/m4/Downloads/Y/Github/fairyrealm/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,7824,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/m4/Downloads/Y/Github/fairyrealm/apps/web/src/app/page.tsx"],u="/page",h={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9252:()=>{},5034:(e,r,t)=>{Promise.resolve().then(t.bind(t,6658))},1646:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,4424,23)),Promise.resolve().then(t.t.bind(t,7752,23)),Promise.resolve().then(t.t.bind(t,5275,23)),Promise.resolve().then(t.t.bind(t,9842,23)),Promise.resolve().then(t.t.bind(t,1633,23)),Promise.resolve().then(t.t.bind(t,9224,23))},6658:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});var s=t(3227),a=t(3677);function n(){let[e,r]=(0,a.useState)([]),[t,n]=(0,a.useState)(""),[i,o]=(0,a.useState)([]),[l,d]=(0,a.useState)(""),[c,u]=(0,a.useState)(!1),[h,p]=(0,a.useState)(void 0),[m]=(0,a.useState)("user-demo-"+Math.random().toString(36).substring(7)),b=async()=>{if(!l.trim()||c)return;let e={role:"user",content:l};o(r=>[...r,e]),d(""),u(!0);try{let r=await fetch("http://localhost:8787/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:m,bookId:t,message:e.content,conversationId:h})});if(!r.ok)throw Error("API Error");let s=await r.json();p(s.conversationId);let a={role:"assistant",content:s.reply,feedback:s.feedback,requireRewrite:s.requireRewrite};o(e=>[...e,a])}catch(e){console.error(e),o(e=>[...e,{role:"system",content:"Error connecting to teacher."}])}finally{u(!1)}};return(0,s.jsxs)("main",{className:"container",children:[(0,s.jsxs)("header",{children:[s.jsx("h1",{children:"FairyRealm \uD83E\uDDDA"}),(0,s.jsxs)("div",{className:"book-selector",children:[s.jsx("label",{children:"Choose a Book: "}),s.jsx("select",{value:t,onChange:e=>n(e.target.value),children:e.length>0?e.map(e=>s.jsx("option",{value:e.id,children:e.title},e.id)):s.jsx("option",{children:"Loading books..."})})]})]}),(0,s.jsxs)("div",{className:"chat-window",children:[i.map((e,r)=>(0,s.jsxs)("div",{className:`message ${e.role}`,children:[s.jsx("div",{className:"bubble",children:e.content}),e.feedback&&(0,s.jsxs)("div",{className:"feedback-card",children:[s.jsx("h4",{children:"Teacher's Feedback:"}),e.feedback.grammar&&(0,s.jsxs)("p",{children:[s.jsx("strong",{children:"Grammar:"})," ",e.feedback.grammar]}),e.feedback.vocabulary&&(0,s.jsxs)("p",{children:[s.jsx("strong",{children:"Vocabulary:"})," ",e.feedback.vocabulary]}),s.jsx("p",{children:s.jsx("em",{children:e.feedback.encouragement})}),e.requireRewrite&&s.jsx("div",{className:"badge-retry",children:"Please rewrite this! ✍️"})]})]},r)),c&&s.jsx("div",{className:"message assistant",children:s.jsx("div",{className:"bubble",children:"Thinking..."})})]}),(0,s.jsxs)("div",{className:"input-area",children:[s.jsx("input",{type:"text",value:l,onChange:e=>d(e.target.value),onKeyDown:e=>"Enter"===e.key&&b(),placeholder:"Type your answer in English..."}),s.jsx("button",{onClick:b,disabled:c,children:"Send"})]})]})}},7718:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n,metadata:()=>a});var s=t(9013);t(5556);let a={title:"FairyRealm - English Learning Assistant",description:"Learn English with AI teacher"};function n({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{children:e})})}},151:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(3189).createProxy)(String.raw`/Users/m4/Downloads/Y/Github/fairyrealm/apps/web/src/app/page.tsx#default`)},5556:()=>{}};var r=require("../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[592],()=>t(9482));module.exports=s})();