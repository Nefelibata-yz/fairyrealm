module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},46940,a=>{"use strict";var b=a.i(87924),c=a.i(72131);let d=[{id:"book-1",title:"The Little Prince"},{id:"book-2",title:"Harry Potter"}];function e(){let[a,e]=(0,c.useState)(d[0].id),[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(void 0),[n]=(0,c.useState)("user-demo-"+Math.random().toString(36).substring(7)),o=async()=>{if(!h.trim()||j)return;let b={role:"user",content:h};g(a=>[...a,b]),i(""),k(!0);try{let c=await fetch("http://localhost:8787/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:n,bookId:a,message:b.content,conversationId:l})});if(!c.ok)throw Error("API Error");let d=await c.json();m(d.conversationId);let e={role:"assistant",content:d.reply,feedback:d.feedback,requireRewrite:d.requireRewrite};g(a=>[...a,e])}catch(a){console.error(a),g(a=>[...a,{role:"system",content:"Error connecting to teacher."}])}finally{k(!1)}};return(0,b.jsxs)("main",{className:"container",children:[(0,b.jsxs)("header",{children:[(0,b.jsx)("h1",{children:"FairyRealm ðŸ§š"}),(0,b.jsxs)("div",{className:"book-selector",children:[(0,b.jsx)("label",{children:"Choose a Book: "}),(0,b.jsx)("select",{value:a,onChange:a=>e(a.target.value),children:d.map(a=>(0,b.jsx)("option",{value:a.id,children:a.title},a.id))})]})]}),(0,b.jsxs)("div",{className:"chat-window",children:[f.map((a,c)=>(0,b.jsxs)("div",{className:`message ${a.role}`,children:[(0,b.jsx)("div",{className:"bubble",children:a.content}),a.feedback&&(0,b.jsxs)("div",{className:"feedback-card",children:[(0,b.jsx)("h4",{children:"Teacher's Feedback:"}),a.feedback.grammar&&(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Grammar:"})," ",a.feedback.grammar]}),a.feedback.vocabulary&&(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Vocabulary:"})," ",a.feedback.vocabulary]}),(0,b.jsx)("p",{children:(0,b.jsx)("em",{children:a.feedback.encouragement})}),a.requireRewrite&&(0,b.jsx)("div",{className:"badge-retry",children:"Please rewrite this! âœï¸"})]})]},c)),j&&(0,b.jsx)("div",{className:"message assistant",children:(0,b.jsx)("div",{className:"bubble",children:"Thinking..."})})]}),(0,b.jsxs)("div",{className:"input-area",children:[(0,b.jsx)("input",{type:"text",value:h,onChange:a=>i(a.target.value),onKeyDown:a=>"Enter"===a.key&&o(),placeholder:"Type your answer in English..."}),(0,b.jsx)("button",{onClick:o,disabled:j,children:"Send"})]})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__59b7e222._.js.map